{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\patri\\\\ReactProjects\\\\react-firebase-grid-dashboard\\\\src\\\\ProfileImage.js\";\nimport React, { useRef, useState, useEffect } from 'react';\nimport { uploadImage, getDownloadUrl } from './firebase/user';\nexport const ProfileImage = ({\n  id\n}) => {\n  const fileInput = useRef(null);\n  const [imageUrl, setImageUrl] = useState('');\n  const [uploadProgress, setUploadProgress] = useState(0);\n  useEffect(() => {\n    getDownloadUrl(id).then(url => !!url && setImageUrl(url));\n  }, [id]);\n\n  const fileChange = async files => {\n    const ref = await uploadImage(id, files[0], updateProgress);\n    const downloadUrl = await ref.getDownloadURL();\n    setImageUrl(downloadUrl);\n  };\n\n  const updateProgress = snapshot => {\n    const progress = snapshot.bytesTransferred / snapshot.totalBytes * 100;\n    setUploadProgress(progress);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"four wide column profile-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"ui image\",\n    src: imageUrl || '/profile-placeholder.png',\n    alt: \"profile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"file-input\",\n    type: \"file\",\n    accept: \".png,.jpg\",\n    ref: fileInput,\n    onChange: e => fileChange(e.target.files),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"progress\", {\n    style: {\n      width: '100%'\n    },\n    max: \"100\",\n    value: uploadProgress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"ui grey button upload-button\",\n    onClick: () => fileInput.current.click(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, \"Upload Photo\"));\n};","map":{"version":3,"sources":["C:/Users/patri/ReactProjects/react-firebase-grid-dashboard/src/ProfileImage.js"],"names":["React","useRef","useState","useEffect","uploadImage","getDownloadUrl","ProfileImage","id","fileInput","imageUrl","setImageUrl","uploadProgress","setUploadProgress","then","url","fileChange","files","ref","updateProgress","downloadUrl","getDownloadURL","snapshot","progress","bytesTransferred","totalBytes","e","target","width","current","click"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,EAAkCC,SAAlC,QAAmD,OAAnD;AACA,SAASC,WAAT,EAAsBC,cAAtB,QAA4C,iBAA5C;AAEA,OAAO,MAAMC,YAAY,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAY;AACtC,QAAMC,SAAS,GAAGP,MAAM,CAAC,IAAD,CAAxB;AACA,QAAM,CAACQ,QAAD,EAAWC,WAAX,IAA0BR,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACS,cAAD,EAAiBC,iBAAjB,IAAsCV,QAAQ,CAAC,CAAD,CAApD;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdE,IAAAA,cAAc,CAACE,EAAD,CAAd,CAAmBM,IAAnB,CAAyBC,GAAD,IAAS,CAAC,CAACA,GAAF,IAASJ,WAAW,CAACI,GAAD,CAArD;AACD,GAFQ,EAEN,CAACP,EAAD,CAFM,CAAT;;AAIA,QAAMQ,UAAU,GAAG,MAAOC,KAAP,IAAiB;AAClC,UAAMC,GAAG,GAAG,MAAMb,WAAW,CAACG,EAAD,EAAKS,KAAK,CAAC,CAAD,CAAV,EAAeE,cAAf,CAA7B;AACA,UAAMC,WAAW,GAAG,MAAMF,GAAG,CAACG,cAAJ,EAA1B;AACAV,IAAAA,WAAW,CAACS,WAAD,CAAX;AACD,GAJD;;AAMA,QAAMD,cAAc,GAAIG,QAAD,IAAc;AACnC,UAAMC,QAAQ,GAAID,QAAQ,CAACE,gBAAT,GAA4BF,QAAQ,CAACG,UAAtC,GAAoD,GAArE;AACAZ,IAAAA,iBAAiB,CAACU,QAAD,CAAjB;AACD,GAHD;;AAKA,sBACE;AAAK,IAAA,SAAS,EAAC,gCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,UADZ;AAEE,IAAA,GAAG,EAAEb,QAAQ,IAAI,0BAFnB;AAGE,IAAA,GAAG,EAAC,SAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAME;AACE,IAAA,SAAS,EAAC,YADZ;AAEE,IAAA,IAAI,EAAC,MAFP;AAGE,IAAA,MAAM,EAAC,WAHT;AAIE,IAAA,GAAG,EAAED,SAJP;AAKE,IAAA,QAAQ,EAAGiB,CAAD,IAAOV,UAAU,CAACU,CAAC,CAACC,MAAF,CAASV,KAAV,CAL7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IANF,eAaE;AACE,IAAA,KAAK,EAAE;AAAEW,MAAAA,KAAK,EAAE;AAAT,KADT;AAEE,IAAA,GAAG,EAAC,KAFN;AAGE,IAAA,KAAK,EAAEhB,cAHT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAbF,eAkBE;AACE,IAAA,SAAS,EAAC,8BADZ;AAEE,IAAA,OAAO,EAAE,MAAMH,SAAS,CAACoB,OAAV,CAAkBC,KAAlB,EAFjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAlBF,CADF;AA2BD,CA/CM","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\nimport { uploadImage, getDownloadUrl } from './firebase/user';\n\nexport const ProfileImage = ({ id }) => {\n  const fileInput = useRef(null);\n  const [imageUrl, setImageUrl] = useState('');\n  const [uploadProgress, setUploadProgress] = useState(0);\n\n  useEffect(() => {\n    getDownloadUrl(id).then((url) => !!url && setImageUrl(url));\n  }, [id]);\n\n  const fileChange = async (files) => {\n    const ref = await uploadImage(id, files[0], updateProgress);\n    const downloadUrl = await ref.getDownloadURL();\n    setImageUrl(downloadUrl);\n  };\n\n  const updateProgress = (snapshot) => {\n    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;\n    setUploadProgress(progress);\n  };\n\n  return (\n    <div className=\"four wide column profile-image\">\n      <img\n        className=\"ui image\"\n        src={imageUrl || '/profile-placeholder.png'}\n        alt=\"profile\"\n      />\n      <input\n        className=\"file-input\"\n        type=\"file\"\n        accept=\".png,.jpg\"\n        ref={fileInput}\n        onChange={(e) => fileChange(e.target.files)}\n      />\n      <progress\n        style={{ width: '100%' }}\n        max=\"100\"\n        value={uploadProgress}\n      ></progress>\n      <button\n        className=\"ui grey button upload-button\"\n        onClick={() => fileInput.current.click()}\n      >\n        Upload Photo\n      </button>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}